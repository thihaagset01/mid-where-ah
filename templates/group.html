
{% extends "mobile_base.html" %}

{% block title %}MidWhereAh - Groups{% endblock %}
{% block mobile_js %}{% endblock %}
{% block head %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/groups.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/group-creation.css') }}">
{% endblock %}

{% block content %}
<!-- Groups Page Header -->
<div class="groups-header">
  <h1>Groups</h1>
  <div class="search-container">
    <input type="text" class="search-input" placeholder="Search groups...">
    <i class="fas fa-search search-icon"></i>
  </div>
</div>

<!-- Groups List Container -->
<div class="groups-container">
  <div class="group-list" id="groupsList">
    <!-- Groups will be loaded here dynamically -->
    <!-- Loading state -->
    <div class="loading-groups" id="loadingGroups">
      <div class="loading-spinner"></div>
      <p>Loading your groups...</p>
    </div>
  </div>
</div>

<!-- Create Group Button -->
<button class="create-group-btn" onclick="showCreateGroupModal()" id="createGroupBtn">
  <i class="fas fa-plus"></i>
</button>

<!-- Join Group Button -->
<button class="join-group-btn" onclick="showJoinGroupModal()" id="joinGroupBtn">
  <i class="fas fa-sign-in-alt"></i>
</button>

<!-- Create Group Modal (will be injected by JavaScript) -->
<div id="createGroupModalContainer"></div>

<!-- Join Group Modal -->
<div class="modal-overlay hidden" id="joinGroupOverlay">
  <div class="join-group-modal">
    <div class="modal-header">
      <h2>Join Group</h2>
      <button class="close-btn" onclick="closeJoinGroupModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label>Enter Invite Code</label>
        <input type="text" id="inviteCodeInput" placeholder="e.g., ABC123" 
               maxlength="6" style="text-transform: uppercase;">
        <small class="form-help">Ask a group member for the 6-character invite code</small>
      </div>
    </div>
    <div class="modal-footer">
      <button class="cancel-btn" onclick="closeJoinGroupModal()">Cancel</button>
      <button class="join-btn" id="submitJoinGroup">Join Group</button>
    </div>
  </div>
</div>

<!-- Success/Error Messages -->
<div class="toast-container" id="toastContainer"></div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/group-creation.js') }}"></script>
<script src="{{ url_for('static', filename='js/group-invitation.js') }}"></script>
<!-- <script src="{{ url_for('static', filename='js/groups-enhanced.js') }}"></script> -->
{% endblock %}